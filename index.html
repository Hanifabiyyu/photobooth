<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avotobooth</title>
    <link rel="icon" href="assets/logo.png" type="image/png">

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>

    <div class="top-bar">
        <div class="logo-container">
            <img src="assets/logo.png" alt="Logo" class="app-logo">
            <span class="logo-text">‚ú® Avotobooth ‚ú®</span>
        </div>
        
        <div id="global-timer" class="timer-display hidden">Sisa Waktu: <span id="time-remaining">05:00</span></div>
    </div>

    <section id="screen-welcome" class="screen active">
        <div class="content-box">
            <h1>Halo! Selamat Datang</h1>
            <p>Siap untuk membuat kenangan seru?</p>
            
            <div class="filter-selection" style="margin: 20px 0;">
                <p style="font-weight: bold; margin-bottom: 10px; color: var(--primary-btn);">Pilih Filter:</p>
                <label style="margin-right: 15px; cursor: pointer;">
                    <input type="radio" name="filterMode" value="color" checked onchange="setFilterMode('color')"> 
                    üåà Color
                </label>
                <label style="margin-right: 15px; cursor: pointer;">
                    <input type="radio" name="filterMode" value="bnw" onchange="setFilterMode('bnw')"> 
                    ‚ö´‚ö™ B&W
                </label>
            </div>

            <button class="btn-primary" onclick="startSession()">Mulai Sesi üì∏</button>
        </div>
    </section>

   <section id="screen-strip-select" class="screen">
        <h2>Mau berapa foto?</h2>
        <div class="template-options">
            <div class="template-card" onclick="selectStripCount(1)">
                <div class="mini-strip polaroid-strip">
                    <div></div> </div>
                <p>Polaroid (1 Foto)</p>
            </div>

            <div class="template-card" onclick="selectStripCount(3)">
                <div class="mini-strip three-strip">
                    <div></div><div></div><div></div>
                </div>
                <p>3 Foto</p>
            </div>

            <div class="template-card" onclick="selectStripCount(4)">
                <div class="mini-strip four-strip">
                    <div></div><div></div><div></div><div></div>
                </div>
                <p>4 Foto</p>
            </div>
        </div>
    </section>

    <section id="screen-template-choice" class="screen">
        <h2>Pilih Bingkai Foto</h2>
        <p>Pilih desain bawaan atau upload sendiri</p>
        
        <div id="assets-gallery" class="gallery-container">
            </div>

        <div class="divider" style="margin: 20px 0; color: #888;">--- Atau ---</div>

        <div class="custom-upload-area">
            <label for="custom-frame-input" class="btn-secondary" style="cursor: pointer;">üì§ Upload Frame Sendiri</label>
            <input type="file" id="custom-frame-input" accept="image/png" style="display:none;" onchange="handleCustomUpload(this)">
        </div>
    </section>

    <section id="screen-capture" class="screen">
        <div class="camera-container">
            <video id="video-feed" autoplay playsinline></video>
            <div class="crop-guide"></div>
            <div id="countdown-overlay" class="hidden">3</div>
        </div>
        <p id="photo-instruction">Bersiap...</p>
        <canvas id="photo-canvas" style="display:none;"></canvas>
    </section>

    <section id="screen-preview" class="screen">
        <h2>Preview Hasil</h2>
        <div id="preview-container">
            <img id="preview-image" alt="Preview Strip">
        </div>
        
        <div class="retake-section">
            <p>Klik foto kecil di bawah untuk mengulang satu per satu:</p>
            <div id="thumbnails-container" class="thumbnails-row"></div>
        </div>

        <div class="action-buttons">
            <button class="btn-secondary" onclick="retakeAll()">Ulangi Semua üîÑ</button>
            <button class="btn-primary" onclick="finalizeSession()">Lanjut ke Cetak ‚úÖ</button>
        </div>
    </section>

    <section id="screen-print" class="screen">
        <h2>Siap Dicetak!</h2>
        <p>Waktu tersisa: <span id="print-timer">03:00</span></p>
        
        <div class="print-preview-area">
            <img id="final-image" alt="Final Strip">
        </div>

        <div class="action-buttons">
            <button class="btn-secondary" onclick="downloadImage()">Unduh ‚¨áÔ∏è</button>
            <button class="btn-primary" onclick="printImage()">Cetak üñ®Ô∏è</button>
        </div>
        <button class="btn-text" onclick="finishSession()">Selesai</button>
    </section>

    <section id="screen-thankyou" class="screen">
        <div class="content-box">
            <h1>Terima Kasih! ‚ú®</h1>
            <p>Jangan lupa ambil fotomu ya!</p>
            <button class="btn-primary" onclick="resetApp()">Foto Lagi?</button>
        </div>
    </section>

    <script src="script.js"></script>
</body>
</html>